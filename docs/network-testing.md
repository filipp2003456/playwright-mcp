# Network Monitoring Test Plan

Цель: проверить корректность функции сетевого мониторинга Playwright MCP. Тестирование сосредоточено на сборе и анализе network‑запросов. UI‑действия выполняются только в объёме, необходимом для генерации сетевого трафика.

## Подготовка

1. Убедиться, что сервер запущен с нужными лимитами (`PLAYWRIGHT_MCP_NETWORK_MAX_REQUEST_KB`, `PLAYWRIGHT_MCP_NETWORK_MAX_RESPONSE_KB`).
2. Перед началом теста очистить историю (`browser_network_clear_requests`).
3. Сделать первоначальный снимок usage (`browser_network_get_usage`) и зафиксировать стартовые значения.

## Основной сценарий

1. Навигация на тестовый сайт (укажем отдельно) и выполнение действий, которые генерируют разнообразные сетевые запросы (GET, POST, fetch, media).
2. После ключевых шагов вызывать `browser_network_get_requests`:
   - без фильтров — убедиться, что список содержит новые запросы;
   - с фильтрами по `method`, `resourceType`, `urlPattern`, `status` — убедиться, что фильтрация работает.
   - с параметром `since` — отфильтровать свежие запросы.
   - использовать `search` минимум дважды: по текстовому фрагменту (`"keyword"`) и по паттерну с wildcard (`"*.json"`).
3. Выбрать несколько запросов разных типов (document, script, fetch) и запросить детали через `browser_network_get_request_details`:
   - проверить наличие заголовков и тел;
   - убедиться, что для обрезанных тел есть отметки `cut`;
   - зафиксировать, сколько байт сохранено/исходно.
4. Вызвать `browser_network_get_stats`:
   - количество запросов, распределение по методам/статусам/типам;
   - статистика по страницам;
   - блок Storage usage — сравнить с ожидаемым.
5. Снова выполнить `browser_network_get_usage` и удостовериться, что объём памяти увеличился соразмерно количеству запросов. В отчёте указать текущие лимиты и оценку памяти.
6. Записать, сколько запросов было помечено как обрезанные (по данным из `get_stats`/`get_requests`).
7. Очистить историю (`browser_network_clear_requests`) и подтвердить, что `browser_network_get_usage` и `browser_network_get_stats` отражают пустое состояние.

## Отчёт

В итоговом отчёте указать:
- Какие действия выполнялись на сайте (кратко, без UI‑деталей).
- Сколько запросов было собрано и в каких категориях.
- Показатели usage до и после сценария.
- Количество запросов с обрезанными телами и примеры (`requestId`, сохранённый/исходный объём).
- Результаты поиска по `search` (какие запросы найдены, ссылки на `requestId`).
- Подтверждение корректной работы `since` (какой интервал использован и сколько запросов попало).
- Статус очистки истории.

Важно: не описывать клики/hover/перетаскивания — интересует только сеть и связанные инструменты.
